// Copyright (c) 2022 Ziga Miklosic
// All Rights Reserved
// This software is under MIT licence (https://opensource.org/licenses/MIT)
////////////////////////////////////////////////////////////////////////////////
/**
* @file     fsm.h
* @brief    FSM manipulations
* @author   Ziga Miklosic
* @date     22.04.2022
* @version	V1.0.0
*/
////////////////////////////////////////////////////////////////////////////////
/**
 * @addtogroup FSM
 * @{ <!-- BEGIN GROUP -->
 */
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Includes
////////////////////////////////////////////////////////////////////////////////
#include <stdint.h>
#include <stdbool.h>

#include "fsm.h"

////////////////////////////////////////////////////////////////////////////////
// Definitions
////////////////////////////////////////////////////////////////////////////////



/**
 * 	FSM data
 */
typedef struct fsm_s
{
	fsm_cfg_t 	cfg;			/**<FSM setup */
	uint32_t 	duration;		/**<Duration inside FSM state */
	bool		first_entry;	/**<First entry of state */
} fsm_t;

////////////////////////////////////////////////////////////////////////////////
// Variables
////////////////////////////////////////////////////////////////////////////////

/**
 * 	Initialization guard
 */
static bool gb_is_init = false;


////////////////////////////////////////////////////////////////////////////////
// Function Prototypes
////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////////
// Functions
////////////////////////////////////////////////////////////////////////////////






////////////////////////////////////////////////////////////////////////////////
/**
* @} <!-- END GROUP -->
*/
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
/**
*@addtogroup FSM_API
* @{ <!-- BEGIN GROUP -->
*
* 	Following functions are part of API calls.
*/
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
/**
*   Initialise FSMs
*
* @param[out]	p_fsm_inst	- Pointer to FSM instance
* @param[in]	p_cfg		- Pointer to FSM configuration table
* @return   	status		- Status of initialisation
*/
////////////////////////////////////////////////////////////////////////////////
fsm_status_t fsm_init(p_fsm_t * p_fsm_inst, const fsm_cfg_t * const p_cfg)
{
	fsm_status_t status = eFSM_OK;

	if ( false == gb_is_init )
	{

	}
	else
	{
		status = eFSM_ERROR_INIT;
	}

	return status;
}

////////////////////////////////////////////////////////////////////////////////
/**
*   Get FSM initialisation flag
*
* @param[in]	fsm_inst	- FSM instance
* @param[out]	p_is_init 	- Initialisation flag
* @return   	status		- Status of initialisation
*/
////////////////////////////////////////////////////////////////////////////////
fsm_status_t fsm_is_init(p_fsm_t fsm_inst, bool * const p_is_init)
{
	fsm_status_t status = eFSM_OK;

	if ( NULL != p_is_init )
	{
		*p_is_init = gb_is_init;
	}
	else
	{
		status = eFSM_ERROR;
	}

	return status;
}


fsm_status_t fsm_hndl(p_fsm_t fsm_inst)
{
	fsm_status_t status = eFSM_OK;



	return status;
}



////////////////////////////////////////////////////////////////////////////////
/*!
 * @} <!-- END GROUP -->
 */
////////////////////////////////////////////////////////////////////////////////
